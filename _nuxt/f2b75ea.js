(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{455:function(t,e,n){"use strict";n.r(e);n(9),n(26);var r={data:function(){return{level:1,steps:2,approvers:[],modal:!1,users:[]}},watch:{modal:function(t){t&&this.findUsers()}},methods:{findUsers:function(){var t=this;this.$axios.get("v1/users").then((function(e){t.users=e.data,t.$store.dispatch("request/setUsers",{users:t.users})}))},setApprovers:function(){var t=this,e=[],n=[];this.approvers.forEach((function(r){e.push({level:t.approvers.indexOf(r)+1,name:t.users[r].name,email:t.users[r].email,phone:t.users[r].phone}),n.push({approverId:t.users[r].userId,level:t.approvers.indexOf(r)+1})})),this.$store.dispatch("request/setApprovers",{approvers:e}),this.$store.dispatch("request/setApproveRequests",{approveRequests:n}),this.$refs.dialog.save(this.approvers)}}},o=n(35),l=n(41),c=n.n(l),v=n(172),d=n(394),_=n(393),m=n(431),f=n(548),h=n(377),x=n(165),k=n(105),V=n(166),C=n(65),w=n(170),y=n(429),$=n(391),S=n(443),T=n(404),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mb-12",attrs:{elevation:"0"}},[n("v-dialog",{ref:"dialog",attrs:{"return-value":t.approvers,persistent:"",scrollable:"",width:"500px"},on:{"update:returnValue":function(e){t.approvers=e},"update:return-value":function(e){t.approvers=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"accent",dark:"",small:"","prepend-icon":"mdi-account-check-outline"}},"v-btn",o,!1),r),[t._v("\n        결재자 조회\n      ")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[t._v(" "),n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"100%"}},[n("v-toolbar",{attrs:{color:"accent",dark:""}},[n("v-toolbar-title",[t._v("결재자")])],1),t._v(" "),n("v-list",{attrs:{"two-line":""}},[n("v-list-item-group",{attrs:{"active-class":"accent--text",multiple:""},model:{value:t.approvers,callback:function(e){t.approvers=e},expression:"approvers"}},[t._l(t.users,(function(e,r){return[n("v-list-item",{key:e.email,scopedSlots:t._u([{key:"default",fn:function(o){var l=o.active;return[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),t._v(" "),n("v-list-item-subtitle",{staticClass:"text--primary",domProps:{textContent:t._s(e.email)}}),t._v(" "),n("v-list-item-action-text",{domProps:{textContent:t._s(e.phone)}})],1),t._v(" "),n("v-list-item-action",[l?n("v-chip",{staticClass:"ma-2",attrs:{color:"warning","text-color":"white"}},[n("span",[t._v(t._s(t.approvers.indexOf(r)+1)+"번 결재자")])]):t._e()],1)]}}],null,!0)}),t._v(" "),r<t.users.length-1?n("v-divider",{key:r}):t._e()]}))],2)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.modal=!1}}},[t._v("\n          Close\n        ")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.setApprovers}},[t._v("\n          Save\n        ")])],1)],1)],1),t._v(" "),n("v-simple-table",{staticStyle:{"padding-top":"15px"},attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("\n            결재 순서\n          ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n            이름\n          ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n            Email\n          ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n            연락처\n          ")])])]),t._v(" "),n("tbody",t._l(t.approvers,(function(e){return n("tr",{key:t.users[e].email},[n("td",[t._v(t._s(t.approvers.indexOf(e)+1))]),t._v(" "),n("td",[t._v(t._s(t.users[e].name))]),t._v(" "),n("td",[t._v(t._s(t.users[e].email))]),t._v(" "),n("td",[t._v(t._s(t.users[e].phone))])])})),0)]},proxy:!0}])})],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:v.a,VCard:d.a,VCardActions:_.a,VChip:m.a,VDialog:f.a,VDivider:h.a,VList:x.a,VListItem:k.a,VListItemAction:V.a,VListItemActionText:C.a,VListItemContent:C.b,VListItemGroup:w.a,VListItemSubtitle:C.c,VListItemTitle:C.d,VSimpleTable:y.a,VSpacer:$.a,VToolbar:S.a,VToolbarTitle:T.a})},559:function(t,e,n){"use strict";n.r(e);var r=n(22),o=(n(82),{data:function(){return{level:1,next:"다음",prev:"이전",modal:!1,dates:[],reason:"",rule:{reason:[function(t){return!!t||"사유를 입력해주세요."}]}}},watch:{dates:function(t){this.$store.dispatch("request/setDates",{dates:t})},reason:function(t){this.$store.dispatch("request/setReason",{reason:t})}},methods:{postRequest:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("v1/application",t.$store.state.request.request).then((function(e){t.$router.push("/request/list"),t.$store.dispatch("snackbar/showSnackbar",{snackbarText:"휴가 신청이 완료됐습니다.",snackbarColor:"success"}),t.$store.dispatch("request/requestComplete")})).catch((function(e){t.$store.dispatch("request/requestComplete"),t.$store.dispatch("snackbar/showSnackbar",{snackbarText:e,snackbarColor:"error"})}));case 2:case"end":return e.stop()}}),e)})))()}}}),l=n(35),c=n(41),v=n.n(c),d=n(172),_=n(394),m=n(554),f=n(385),h=n(553),x=n(548),k=n(386),V=n(388),C=n(428),w=n(429),y=n(391),$=n(550),S=n(551),T=n(552),I=n(457),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","grid-list-md":"","fill-height":""}},[n("v-row",{attrs:{justify:"center"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{md10:"","offset-md1":""}},[n("v-card",{staticClass:"mx-auto",attrs:{width:"800"}},[n("v-stepper",{attrs:{vertical:""},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}},[n("v-stepper-step",{attrs:{complete:t.level>1,editable:"",step:"1"}},[t._v("\n              휴가 날짜\n            ")]),t._v(" "),n("v-stepper-content",{attrs:{step:"1"}},[n("v-card",{staticClass:"mb-12",attrs:{elevation:"0"}},[n("v-dialog",{ref:"dialog",attrs:{"return-value":t.dates,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.dates=e},"update:return-value":function(e){t.dates=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("v-combobox",t._g(t._b({attrs:{multiple:"",chips:"","small-chips":"",label:"날짜 선택","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},"v-combobox",o,!1),r))]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[t._v(" "),n("v-date-picker",{attrs:{scrollable:"",multiple:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",color:"warning"},on:{click:function(e){t.modal=!1}}},[t._v("\n                      Cancel\n                    ")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"warning"},on:{click:function(e){return t.$refs.dialog.save(t.dates)}}},[t._v("\n                      OK\n                    ")])],1)],1)],1),t._v(" "),n("v-btn",{attrs:{color:"warning",small:""},on:{click:function(e){t.level=2}}},[t._v("\n                "+t._s(t.next)+"\n              ")])],1),t._v(" "),n("v-stepper-step",{attrs:{complete:t.level>2,editable:"",step:"2"}},[t._v("\n              휴가 사유\n            ")]),t._v(" "),n("v-stepper-content",{attrs:{step:"2"}},[n("v-card",{staticClass:"mb-12",attrs:{elevation:"0"}},[n("v-text-field",{attrs:{label:"휴가 사유를 입력하세요.",rules:t.rule.reason,"prepend-icon":"mdi-clipboard-edit-outline"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),t._v(" "),n("v-btn",{attrs:{color:"warning",small:""},on:{click:function(e){t.level=1}}},[t._v("\n                "+t._s(t.prev)+"\n              ")]),t._v(" "),n("v-btn",{attrs:{color:"warning",small:""},on:{click:function(e){t.level=3}}},[t._v("\n                "+t._s(t.next)+"\n              ")])],1),t._v(" "),n("v-stepper-step",{attrs:{complete:t.level>3,editable:"",step:"3"}},[t._v("\n              결재선 선택\n            ")]),t._v(" "),n("v-stepper-content",{attrs:{step:"3"}},[n("v-card",{staticClass:"mb-12",attrs:{elevation:"0"}},[n("approve")],1),t._v(" "),n("v-btn",{attrs:{color:"warning",small:""},on:{click:function(e){t.level=2}}},[t._v("\n                "+t._s(t.prev)+"\n              ")]),t._v(" "),n("v-btn",{attrs:{color:"warning",small:""},on:{click:function(e){t.level=4}}},[t._v("\n                완료\n              ")])],1),t._v(" "),n("v-stepper-step",{attrs:{complete:t.level>4,editable:"",step:"4"}},[t._v("\n              완료\n            ")]),t._v(" "),n("v-stepper-content",{attrs:{step:"4"}},[n("v-combobox",{attrs:{multiple:"",chips:"","small-chips":"",label:"휴가 날짜","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}}),t._v(" "),n("v-text-field",{attrs:{readonly:"","prepend-icon":"mdi-clipboard-edit-outline"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}),t._v(" "),n("v-simple-table",{staticStyle:{"padding-top":"15px","padding-bottom":"15px"},attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("\n                        결재 순서\n                      ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                        이름\n                      ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                        Email\n                      ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                        연락처\n                      ")])])]),t._v(" "),n("tbody",t._l(t.$store.state.request.approvers,(function(e){return n("tr",{key:t.$store.state.request.users[e]},[n("td",[t._v(t._s(t.$store.state.request.approvers.indexOf(e)+1))]),t._v(" "),n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.email))]),t._v(" "),n("td",[t._v(t._s(e.phone))])])})),0)]},proxy:!0}])}),t._v(" "),n("v-btn",{attrs:{width:"100%",color:"warning"},on:{click:t.postRequest}},[t._v("\n                신청\n              ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;v()(component,{Approve:n(455).default}),v()(component,{VBtn:d.a,VCard:_.a,VCombobox:m.a,VContainer:f.a,VDatePicker:h.a,VDialog:x.a,VFlex:k.a,VLayout:V.a,VRow:C.a,VSimpleTable:w.a,VSpacer:y.a,VStepper:$.a,VStepperContent:S.a,VStepperStep:T.a,VTextField:I.a})}}]);